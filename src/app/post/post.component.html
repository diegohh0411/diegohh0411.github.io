<div
class="p-4
flex flex-col gap-3
"
>
  <div
  class="
  bg-gray-100 dark:bg-gray-700
  p-4 rounded-xl
  flex flex-col gap-3
  w-full max-w-3xl md:mx-auto
  ">
    <h1 class="text-7xl">
      {{postMapping.title}}
    </h1>

    <p>
      Publicado el {{(postMapping.publishDateISO8601).toLocaleDateString('es-MX')}}
    </p>

    <div class="flex flex-row gap-3">
      <div *ngFor="let tag of postMapping.tags"
      class="px-4 py-1
      bg-gray-200 hover:bg-gray-300 active:bg-gray-400
      dark:bg-gray-600 dark:hover:bg-gray-500 dark:active:bg-gray-400
      rounded-xl
      cursor-pointer
      "
      [routerLink]="['/archive']"
      [queryParams]="{ tag: tag }"
      >
        #{{tag}}
      </div>
    </div>
  </div>

  <div class="
  max-w-3xl md:mx-auto
  text-justify">
    <markdown class="markdown">
      {{postMapping.content}}
    </markdown>
  </div>

  <div *ngIf="!hintIsHidden && this.postMapping.imageFilenames.length !== 0"
  class="
  bg-blue-100 dark:bg-blue-900
  rounded-xl
  p-4
  flex items-center justify-between gap-4
  w-full max-w-3xl md:mx-auto
  ">
    <p>
      Puedes hacer clic en cualquier imagen para abrirla en pantalla completa.
    </p>

    <svg
    (click)="hideHint()"
    xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
    class="w-12 h-12
    md:w-6 md:h-6
    cursor-pointer">
      <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
    </svg>
  </div>

  <div class="flex flex-col
  gap-[50vh]
  pt-6 pb-24
  relative
  "
  id="imageContainer"
  >
    <div *ngFor="let image of postMapping.imageObjects"
    class="w-2/3 md:w-1/6 max-h-[80vh]
    bg-gray-100 dark:bg-gray-700
    cursor-pointer
    sticky
    transition-all ease-in-out
    drop-shadow-2xl
    relative
    "
    [ngClass]="[
      image.loaded ? '' : 'aspect-[2/3]'
    ]"

    [style.left]="md ? image.left.md : image.left.base"
    [style.top]="image.top.base"

    [routerLink]="'/g/' + postUuid + '/' + image.filename.replace('.', '%2E')"
    >
      <img
       [defaultImage]="'assets/' + image.filename + '_400.jpg'"
       [lazyLoad]="'assets/' + image.filename + '_1000.jpg'"

       class="w-full object-contain"
       [alt]="'Fotografía de Diego Hernández del álbum ' + postMapping.title + '.'"

       (load)="image.loaded = true"
      />

      <div *ngIf="!image.loaded"
      class="flex items-center justify-center
      absolute inset-0
      ">
        <svg
          xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor"
          class="w-4 h-4 animate-spin
        ">
          <path fill-rule="evenodd" d="M13.836 2.477a.75.75 0 0 1 .75.75v3.182a.75.75 0 0 1-.75.75h-3.182a.75.75 0 0 1 0-1.5h1.37l-.84-.841a4.5 4.5 0 0 0-7.08.932.75.75 0 0 1-1.3-.75 6 6 0 0 1 9.44-1.242l.842.84V3.227a.75.75 0 0 1 .75-.75Zm-.911 7.5A.75.75 0 0 1 13.199 11a6 6 0 0 1-9.44 1.241l-.84-.84v1.371a.75.75 0 0 1-1.5 0V9.591a.75.75 0 0 1 .75-.75H5.35a.75.75 0 0 1 0 1.5H3.98l.841.841a4.5 4.5 0 0 0 7.08-.932.75.75 0 0 1 1.025-.273Z" clip-rule="evenodd" />
        </svg>
      </div>
    </div>


  </div>

  <div class="
  flex flex-col items-center justify-center gap-4
  w-full max-w-3xl mx-auto
  bg-gray-100 dark:bg-gray-700
  rounded-xl p-4
  ">
    <p class="text-center">
      ¿Quieres ver más?
    </p>

    <div
    class="
    bg-blue-100 hover:bg-blue-200 active:bg-blue-300
    dark:bg-blue-900 dark:hover:bg-blue-800 dark:active:bg-blue-700
    p-4 rounded-xl
    flex flex-row items-center justify-center gap-1
    w-full max-w-3xl
    cursor-pointer
    "
      [routerLink]="'/archive'"
    >
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4">
        <path d="M2 3.5A1.5 1.5 0 0 1 3.5 2h2.879a1.5 1.5 0 0 1 1.06.44l1.122 1.12A1.5 1.5 0 0 0 9.62 4H12.5A1.5 1.5 0 0 1 14 5.5v1.401a2.986 2.986 0 0 0-1.5-.401h-9c-.546 0-1.059.146-1.5.401V3.5ZM2 9.5v3A1.5 1.5 0 0 0 3.5 14h9a1.5 1.5 0 0 0 1.5-1.5v-3A1.5 1.5 0 0 0 12.5 8h-9A1.5 1.5 0 0 0 2 9.5Z" />
      </svg>

      <p>
        Ver el archivo
      </p>
    </div>
  </div>
</div>
